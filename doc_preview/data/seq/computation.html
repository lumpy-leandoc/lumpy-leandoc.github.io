<html><head><link rel="stylesheet" href="../../docs_style.css"></head><div class="decl"><h4>computation</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">computation α</span> is the type of unbounded computations returning <span style="background-color:#fdf6e3;color:#657b83;">α</span>.
An element of <span style="background-color:#fdf6e3;color:#657b83;">computation α</span> is an infinite sequence of <span style="background-color:#fdf6e3;color:#657b83;">option α</span> such
that if <span style="background-color:#fdf6e3;color:#657b83;">f n </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> some a</span> for some <span style="background-color:#fdf6e3;color:#657b83;">n</span> then it is constantly <span style="background-color:#fdf6e3;color:#657b83;">some a</span> after that.</p>
</div></div><div class="decl"><h4>computation.return</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">return a</span> is the computation that immediately terminates with result <span style="background-color:#fdf6e3;color:#657b83;">a</span>.</p>
</div></div><div class="decl"><h4>computation.think</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">think c</span> is the computation that delays for one &quot;tick&quot; and then performs
computation <span style="background-color:#fdf6e3;color:#657b83;">c</span>.</p>
</div></div><div class="decl"><h4>computation.thinkN</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">thinkN c n</span> is the computation that delays for <span style="background-color:#fdf6e3;color:#657b83;">n</span> ticks and then performs
computation <span style="background-color:#fdf6e3;color:#657b83;">c</span>.</p>
</div></div><div class="decl"><h4>computation.head</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">head c</span> is the first step of computation, either <span style="background-color:#fdf6e3;color:#657b83;">some a</span> if <span style="background-color:#fdf6e3;color:#657b83;">c </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> return a</span>
or <span style="background-color:#fdf6e3;color:#657b83;">none</span> if <span style="background-color:#fdf6e3;color:#657b83;">c </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> think c&#39;</span>.</p>
</div></div><div class="decl"><h4>computation.tail</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">tail c</span> is the remainder of computation, either <span style="background-color:#fdf6e3;color:#657b83;">c</span> if <span style="background-color:#fdf6e3;color:#657b83;">c </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> return a</span>
or <span style="background-color:#fdf6e3;color:#657b83;">c&#39;</span> if <span style="background-color:#fdf6e3;color:#657b83;">c </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> think c&#39;</span>.</p>
</div></div><div class="decl"><h4>computation.empty</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">empty α</span> is the computation that never returns, an infinite sequence of
<span style="background-color:#fdf6e3;color:#657b83;">think</span>s.</p>
</div></div><div class="decl"><h4>computation.run_for</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">run_for c n</span> evaluates <span style="background-color:#fdf6e3;color:#657b83;">c</span> for <span style="background-color:#fdf6e3;color:#657b83;">n</span> steps and returns the result, or <span style="background-color:#fdf6e3;color:#657b83;">none</span>
if it did not terminate after <span style="background-color:#fdf6e3;color:#657b83;">n</span> steps.</p>
</div></div><div class="decl"><h4>computation.destruct</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">destruct c</span> is the destructor for <span style="background-color:#fdf6e3;color:#657b83;">computation α</span> as a coinductive type.
It returns <span style="background-color:#fdf6e3;color:#657b83;">inl a</span> if <span style="background-color:#fdf6e3;color:#657b83;">c </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> return a</span> and <span style="background-color:#fdf6e3;color:#657b83;">inr c&#39;</span> if <span style="background-color:#fdf6e3;color:#657b83;">c </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> think c&#39;</span>.</p>
</div></div><div class="decl"><h4>computation.run</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">run c</span> is an unsound meta function that runs <span style="background-color:#fdf6e3;color:#657b83;">c</span> to completion, possibly
resulting in an infinite loop in the VM.</p>
</div></div><div class="decl"><h4>computation.corec</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">corec f b</span> is the corecursor for <span style="background-color:#fdf6e3;color:#657b83;">computation α</span> as a coinductive type.
If <span style="background-color:#fdf6e3;color:#657b83;">f b </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> inl a</span> then <span style="background-color:#fdf6e3;color:#657b83;">corec f b </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> return a</span>, and if <span style="background-color:#fdf6e3;color:#657b83;">f b </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> inl b&#39;</span> then
<span style="background-color:#fdf6e3;color:#657b83;">corec f b </span><span style="background-color:#fdf6e3;color:#b58900;">=</span><span style="background-color:#fdf6e3;color:#657b83;"> think (corec f b&#39;)</span>.</p>
</div></div><div class="decl"><h4>computation.lmap</h4><div class="decl_par"><p>left map of <span style="background-color:#fdf6e3;color:#657b83;">⊕</span></p>
</div></div><div class="decl"><h4>computation.rmap</h4><div class="decl_par"><p>right map of <span style="background-color:#fdf6e3;color:#657b83;">⊕</span></p>
</div></div><div class="decl"><h4>computation.terminates</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">terminates s</span> asserts that the computation <span style="background-color:#fdf6e3;color:#657b83;">s</span> eventually terminates with some value.</p>
</div></div><div class="decl"><h4>computation.promises</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">promises s a</span>, or <span style="background-color:#fdf6e3;color:#657b83;">s ~</span><span style="background-color:#fdf6e3;color:#b58900;">&gt;</span><span style="background-color:#fdf6e3;color:#657b83;"> a</span>, asserts that although the computation <span style="background-color:#fdf6e3;color:#657b83;">s</span>
may not terminate, if it does, then the result is <span style="background-color:#fdf6e3;color:#657b83;">a</span>.</p>
</div></div><div class="decl"><h4>computation.length</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">length s</span> gets the number of steps of a terminating computation</p>
</div></div><div class="decl"><h4>computation.get</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">get s</span> returns the result of a terminating computation</p>
</div></div><div class="decl"><h4>computation.results</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">results s a n</span> completely characterizes a terminating computation:
it asserts that <span style="background-color:#fdf6e3;color:#657b83;">s</span> terminates after exactly <span style="background-color:#fdf6e3;color:#657b83;">n</span> steps, with result <span style="background-color:#fdf6e3;color:#657b83;">a</span>.</p>
</div></div><div class="decl"><h4>computation.map</h4><div class="decl_par"><p>Map a function on the result of a computation.</p>
</div></div><div class="decl"><h4>computation.bind</h4><div class="decl_par"><p>Compose two computations into a monadic <span style="background-color:#fdf6e3;color:#657b83;">bind</span> operation.</p>
</div></div><div class="decl"><h4>computation.join</h4><div class="decl_par"><p>Flatten a computation of computations into a single computation.</p>
</div></div><div class="decl"><h4>computation.orelse</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">c₁ </span><span style="background-color:#fdf6e3;color:#b58900;">&lt;</span><span style="background-color:#fdf6e3;color:#657b83;">|</span><span style="background-color:#fdf6e3;color:#b58900;">&gt;</span><span style="background-color:#fdf6e3;color:#657b83;"> c₂</span> calculates <span style="background-color:#fdf6e3;color:#657b83;">c₁</span> and <span style="background-color:#fdf6e3;color:#657b83;">c₂</span> simultaneously, returning
the first one that gives a result.</p>
</div></div><div class="decl"><h4>computation.equiv</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">c₁ ~ c₂</span> asserts that <span style="background-color:#fdf6e3;color:#657b83;">c₁</span> and <span style="background-color:#fdf6e3;color:#657b83;">c₂</span> either both terminate with the same result,
or both loop forever.</p>
</div></div><div class="decl"><h4>computation.lift_rel</h4><div class="decl_par"><p><span style="background-color:#fdf6e3;color:#657b83;">lift_rel R ca cb</span> is a generalization of <span style="background-color:#fdf6e3;color:#657b83;">equiv</span> to relations other than
equality. It asserts that if <span style="background-color:#fdf6e3;color:#657b83;">ca</span> terminates with <span style="background-color:#fdf6e3;color:#657b83;">a</span>, then <span style="background-color:#fdf6e3;color:#657b83;">cb</span> terminates with
some <span style="background-color:#fdf6e3;color:#657b83;">b</span> such that <span style="background-color:#fdf6e3;color:#657b83;">R a b</span>, and if <span style="background-color:#fdf6e3;color:#657b83;">cb</span> terminates with <span style="background-color:#fdf6e3;color:#657b83;">b</span> then <span style="background-color:#fdf6e3;color:#657b83;">ca</span> terminates
with some <span style="background-color:#fdf6e3;color:#657b83;">a</span> such that <span style="background-color:#fdf6e3;color:#657b83;">R a b</span>.</p>
</div></div></html>