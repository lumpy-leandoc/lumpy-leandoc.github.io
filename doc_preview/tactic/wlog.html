<html><head><link rel="stylesheet" href="../docs_style.css"></head><div class="decl"><h4>tactic.interactive.wlog</h4><div class="decl_par"><p>Without loss of generality: reduces to one goal under variables permutations.</p>
<p>Given a goal of the form <span style="background-color:#fdf6e3;color:#657b83;">g xs</span>, a predicate <span style="background-color:#fdf6e3;color:#657b83;">p</span> over a set of variables, as well as variable
permutations <span style="background-color:#fdf6e3;color:#657b83;">xs_i</span>. Then <span style="background-color:#fdf6e3;color:#657b83;">wlog</span> produces goals of the form</p>
<p>The case goal, i.e. the permutation <span style="background-color:#fdf6e3;color:#657b83;">xs_i</span> covers all possible cases:
<span style="background-color:#fdf6e3;color:#657b83;">⊢ p xs_0 </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> ⋯ </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> p xs_n</span>
The main goal, i.e. the goal reduced to <span style="background-color:#fdf6e3;color:#657b83;">xs_0</span>:
<span style="background-color:#fdf6e3;color:#657b83;">(h : p xs_0) ⊢ g xs_0</span>
The invariant goals, i.e. <span style="background-color:#fdf6e3;color:#657b83;">g</span> is invariant under <span style="background-color:#fdf6e3;color:#657b83;">xs_i</span>:
<span style="background-color:#fdf6e3;color:#657b83;">(h : p xs_i) (</span><span style="background-color:#fdf6e3;color:#859900;">this</span><span style="background-color:#fdf6e3;color:#657b83;"> : g xs_0) ⊢ gs xs_i</span></p>
<p>Either the permutation is provided, or a proof of the disjunction is provided to compute the
permutation. The disjunction need to be in assoc normal form, e.g. <span style="background-color:#fdf6e3;color:#657b83;">p₀ </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> (p₁ </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> p₂)</span>. In many cases
the invariant goals can be solved by AC rewriting using <span style="background-color:#fdf6e3;color:#657b83;">cc</span> etc.</p>
<p>Example:
On a state <span style="background-color:#fdf6e3;color:#657b83;">(n m : ℕ) ⊢ p n m</span> the tactic <span style="background-color:#fdf6e3;color:#657b83;">wlog h : n </span><span style="background-color:#fdf6e3;color:#b58900;">≤</span><span style="background-color:#fdf6e3;color:#657b83;"> m </span><span style="background-color:#fdf6e3;color:#859900;">using</span><span style="background-color:#fdf6e3;color:#657b83;"> [n m, m n]</span> produces the following
states:
<span style="background-color:#fdf6e3;color:#657b83;">(n m : ℕ) ⊢ n </span><span style="background-color:#fdf6e3;color:#b58900;">≤</span><span style="background-color:#fdf6e3;color:#657b83;"> m </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> m </span><span style="background-color:#fdf6e3;color:#b58900;">≤</span><span style="background-color:#fdf6e3;color:#657b83;"> n</span>
<span style="background-color:#fdf6e3;color:#657b83;">(n m : ℕ) (h : n </span><span style="background-color:#fdf6e3;color:#b58900;">≤</span><span style="background-color:#fdf6e3;color:#657b83;"> m) ⊢ p n m</span>
<span style="background-color:#fdf6e3;color:#657b83;">(n m : ℕ) (h : m </span><span style="background-color:#fdf6e3;color:#b58900;">≤</span><span style="background-color:#fdf6e3;color:#657b83;"> n) (</span><span style="background-color:#fdf6e3;color:#859900;">this</span><span style="background-color:#fdf6e3;color:#657b83;"> : p n m) ⊢ p m n</span></p>
<p><span style="background-color:#fdf6e3;color:#657b83;">wlog</span> supports different calling conventions. The name <span style="background-color:#fdf6e3;color:#657b83;">h</span> is used to give a name to the introduced
case hypothesis. If the name is avoided, the default will be <span style="background-color:#fdf6e3;color:#657b83;">case</span>.</p>
<p>(1) <span style="background-color:#fdf6e3;color:#657b83;">wlog : p xs0 </span><span style="background-color:#fdf6e3;color:#859900;">using</span><span style="background-color:#fdf6e3;color:#657b83;"> [xs0, …, xsn]</span>
Results in the case goal <span style="background-color:#fdf6e3;color:#657b83;">p xs0 </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> ⋯ </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> ps xsn</span>, the main goal <span style="background-color:#fdf6e3;color:#657b83;">(case : p xs0) ⊢ g xs0</span> and the
invariance goals <span style="background-color:#fdf6e3;color:#657b83;">(case : p xsi) (</span><span style="background-color:#fdf6e3;color:#859900;">this</span><span style="background-color:#fdf6e3;color:#657b83;"> : g xs0) ⊢ g xsi</span>.</p>
<p>(2) <span style="background-color:#fdf6e3;color:#657b83;">wlog : p xs0 </span><span style="background-color:#fdf6e3;color:#b58900;">:=</span><span style="background-color:#fdf6e3;color:#657b83;"> r </span><span style="background-color:#fdf6e3;color:#859900;">using</span><span style="background-color:#fdf6e3;color:#657b83;"> xs0</span>
The expression <span style="background-color:#fdf6e3;color:#657b83;">r</span> is a proof of the shape <span style="background-color:#fdf6e3;color:#657b83;">p xs0 </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> ⋯ </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> p xsi</span>, it is also used to compute the
variable permutations.</p>
<p>(3) <span style="background-color:#fdf6e3;color:#657b83;">wlog </span><span style="background-color:#fdf6e3;color:#b58900;">:=</span><span style="background-color:#fdf6e3;color:#657b83;"> r </span><span style="background-color:#fdf6e3;color:#859900;">using</span><span style="background-color:#fdf6e3;color:#657b83;"> xs0</span>
The expression <span style="background-color:#fdf6e3;color:#657b83;">r</span> is a proof of the shape <span style="background-color:#fdf6e3;color:#657b83;">p xs0 </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> ⋯ </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> p xsi</span>, it is also used to compute the
variable permutations. This is not as stable as (2), for example <span style="background-color:#fdf6e3;color:#657b83;">p</span> cannot be a disjunction.</p>
<p>(4) <span style="background-color:#fdf6e3;color:#657b83;">wlog : R x y </span><span style="background-color:#fdf6e3;color:#859900;">using</span><span style="background-color:#fdf6e3;color:#657b83;"> x y</span> and <span style="background-color:#fdf6e3;color:#657b83;">wlog : R x y</span>
Produces the case <span style="background-color:#fdf6e3;color:#657b83;">R x y </span><span style="background-color:#fdf6e3;color:#b58900;">∨</span><span style="background-color:#fdf6e3;color:#657b83;"> R y x</span>. If <span style="background-color:#fdf6e3;color:#657b83;">R</span> is ≤, then the disjunction discharged using linearity.
If <span style="background-color:#fdf6e3;color:#859900;">using</span><span style="background-color:#fdf6e3;color:#657b83;"> x y</span> is avoided then <span style="background-color:#fdf6e3;color:#657b83;">x</span> and <span style="background-color:#fdf6e3;color:#657b83;">y</span> are the last two variables appearing in the
expression <span style="background-color:#fdf6e3;color:#657b83;">R x y</span>.</p>
</div></div></html>